method dl_concat(start1, end1, start2, end2)
    requires dlseg(next, prev, start1, null, null, end1) * dlseg(next, prev, start2, null, null, end2);
    ensures (null != start2 * dlseg(next, prev, returned, null, null, end2)) ||
            (null == start2 * dlseg(next, prev, returned, null, null, end1));
{
    if (start2 == null) {
        return start1;
    } else if (start1 == null) {
        return start2;
    } else {
        end1.next := start2;
        start2.prev := end1;
        return start1;
    }
}
