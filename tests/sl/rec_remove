method rec_remove(lst)
    requires lseg(next, lst, null);
    ensures lseg(next, returned, null);
{
    if (lst == null)
        return null;
    else if (Random) {
        n := lst.next;
        free lst;
        return n;
    } else {
        n1 := lst.next;
        n2 := rec_remove(n1);
        lst.next := n2;
        return lst;
    }
}
