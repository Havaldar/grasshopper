method dl_copy()
    requires dlseg(next, prev, a, null, null, b) * c == null * d == null;
    ensures dlseg(next, prev, a, null, null, b) * dlseg(next, prev, c, null, null, d);
{
    curr := a;
    old_curr := null;
    while (curr != null) 
        invariant dlseg(next, prev, a, null, curr, old_curr);
        invariant dlseg(next, prev, curr, old_curr, null, b);
        invariant dlseg(next, prev, c, null, null, d);
    {
        old_curr := curr;
        old_d := d;
        new d;
        d.next := null;
        d.prev := old_d;
        if (old_d != null) {
          old_d.next := d;
        } else {
          c := d;
        }
        curr := curr.next;
    }
}
