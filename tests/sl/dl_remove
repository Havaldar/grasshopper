method dl_remove()
    requires dlseg(next, prev, a, null, null, b);
    ensures dlseg(next, prev, a, null, null, b);
{
    if (a == null) {
    } else if (a == b) {
       free a;
       a := null;
       b := null;
    } else {
        curr := a;
        prv := null;
        while ( Random && curr.next != null ) 
            invariant curr != null * dlseg(next, prev, a, null, curr, prv) * dlseg(next, prev, curr, prv, null, b);
        {
            prv := curr;
            curr := curr.next;
        }
        tmp := curr.next;
        if (prv != null) {
            prv.next := curr.next;
        } else {
            a := tmp;
        }
        if (tmp != null) {
            tmp.prev := prv;
        } else {
            b := prv;
        }
        free curr;
    }
}
