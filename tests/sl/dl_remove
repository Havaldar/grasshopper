
remove()
requires dlseg(a, null, null, b)
ensures dlseg(a, null, null, b)
{
    if (a = null) {
    } else if (a = b) {
       free a;
       a := null;
       b := null;
    } else {
        curr := a;
        prv := null;
        while ( Random && curr.next ~= null ) curr ~= null * dlseg(a, null, curr, prv) * dlseg(curr, prv, null, b) {
            prv := curr;
            curr := curr.next;
        }
        tmp := curr.next;
        if (prv ~= null) {
            prv.next := curr.next;
        } else {
            a := tmp;
        }
        if (tmp ~= null) {
            tmp.back := prv;
        } else {
            b := prv;
        }
        free curr;
    }
}
