method copy(lst)
    requires slseg(next, data, lst, null);
    ensures slseg(next, data, lst, null) * slseg(next, data, returned, null);
{
    if (lst == null) {
        return null;
    } else {
        curr := lst;
        new head;
        cp := head;
        cp.data := curr.data;
        cp.next := null;
        while(curr.next != null) 
            invariant lslseg(next, data, lst, curr, curr.data);
            invariant slseg(next, data, curr, null);
            invariant lslseg(next, data, head, cp, curr.data);
            invariant cp |-> null;
            invariant cp.data == curr.data;
            invariant curr != null;
        {
            old_cp := cp;
            new cp;
            old_cp.next := cp;
            curr := curr.next;
            cp.data := curr.data;
            cp.next := null;
        }
        return head;
    }
}
