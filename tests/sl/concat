method concat(a, b)
    requires lseg(next, a, null) * lseg(next, b, null);
    ensures lseg(next, returned, b) * lseg(next, b, null);
{
    if (a == null) {
        return b;
    } else {
        curr := a;
        while(curr.next != null) 
            invariant curr != null * lseg(next, a, curr) * lseg(next, curr, null);
        {
            curr := curr.next; 
        }
        curr.next := b;
        return a;
    }
}
