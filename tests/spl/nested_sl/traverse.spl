include "nested_def.spl";

procedure traverse(x: OuterNode, y: OuterNode)
  requires llseg(x, y)
  ensures llseg(x, y)
{
  var oc := x;
  while (oc != y)
    invariant (oc == y || acc(oc)) -** llseg(x, y)
  {
    var ic := oc.down;
    while (ic != null)
      invariant acc(oc)
      invariant (ic == null || acc(ic)) -** lseg(oc.down, null)
    {
      ic := ic.inext;
    }
    oc := oc.onext;
  }
}
